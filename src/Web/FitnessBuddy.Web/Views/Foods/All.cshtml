@using FitnessBuddy.Web.Infrastructure.Extensions
@model AllFoodsViewModel
@inject FitnessBuddy.Services.Data.Users.IUsersService userService

@{
    this.ViewData["Title"] = "All foods";
}

<h1 class="text-center">
    All foods
</h1>
<partial name="_FoodsPagingPartial" model="@Model" />
<div class="container">
    <div class="row">
        @foreach (var food in @Model.Foods)
        {
            <div class="card col-6 col-sm-5 col-md-3 col-lg-3 flex relative" style="margin: auto">
                <partial name="_FoodPartial" model="food" />
                <ul class="list-group list-group-flush">
                    @if (this.User.Identity.IsAuthenticated)
                    {
                        @if (this.userService.IsFoodFavorite(this.User.GetUserId(), food.Id) == false)
                        {
                            <li class="list-group-item text-center">
                                <a asp-action="AddToFavorite" asp-controller="Foods" asp-route-foodId="@food.Id" class="btn btn-success text-center">
                                    Add to favorite
                                </a>
                            </li>
                        }
                        else
                        {
                            <li class="list-group-item text-center">
                                <strong>The Food is already added.</strong>
                            </li>
                        }
                    }
                </ul>
            </div>
        }
    </div>
</div>
<partial name="_FoodsPagingPartial" model="@Model" />



